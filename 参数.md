

# 奖励

| 奖励项                          | 权重    | 目标               | 含义                      |
| ------------------------------- | ------- | ------------------ | ------------------------- |
| **alive**                 | +0.15   | ⬆️**HIGH** | 机器人活着越久越好        |
| **feet_clearance**        | +1.0    | ⬆️**HIGH** | 抬脚高度越高越好          |
| **gait**                  | +0.5    | ⬆️**HIGH** | 步态协调性越好越好        |
| **action_rate**           | -0.05   | ⬇️**LOW**  | 动作变化越平缓越好        |
| **base_angular_velocity** | -0.05   | ⬇️**LOW**  | 滚转/俯仰越稳定越好       |
| **base_height**           | -10     | ⬇️**LOW**  | 离目标高度(0.78m)越近越好 |
| **base_linear_velocity**  | -2.0    | ⬇️**LOW**  | Z轴速度(上下)越小越好     |
| **dof_pos_limits**        | -5.0    | ⬇️**LOW**  | 关节越不超出范围越好      |
| **energy**                | -2e-5   | ⬇️**LOW**  | 能耗越低越好              |
| **feet_slide**            | -0.2    | ⬇️**LOW**  | 脚滑动越少越好            |
| **flat_orientation_l2**   | -5.0    | ⬇️**LOW**  | 机身倾斜越小越好          |
| **joint_acc**             | -2.5e-7 | ⬇️**LOW**  | 关节加速度越小越好        |

# 物理场景
- 地形 直接引入，velocity_env_cfg.py使用的是随机变化的地形，坡度等都有起伏
- 机器人，在import引入，然后在这里被定义为`robot: ArticulationCfg = ROBOT_CFG.replace(prim_path="{ENV_REGEX_NS}/Robot")`

- 事件：引入了一些随机量
- 目标函数：CommandsCfg，目标函数给到的是质心的，通过神经网络映射到各个关节，这就是各个关节要管的了，

# 神经网络（Actor-Critic）

## Policy Network（策略网络）
- **输入**：89维（含5步历史，有噪声）
  - 基础观测：角速度、重力向量、速度命令、相对关节位置/速度、上一步动作
  - 特点：**加入传感器噪声** → 学会在真实嘈杂环境中工作
- **输出**：29维（关节动作）
  - 范围 ±0.25 rad（scale=0.25限制幅度）
- **职责**：**做动作** → 输出关节控制命令

## Critic Network（价值网络）
- **输入**：92维（含5步历史，**无噪声**）
  - 比Policy多看：**线速度** ← 准确评价状态
  - 特点：**完美真实状态** → 给Policy准确的学习信号
- **输出**：1维标量（价值值）
  - 表示这个状态有多好
- **职责**：**评价状态** → 指导Policy学习

---

# 奖励系统详解（RewardsCfg）

| 类别 | 奖励项 | 权重 | 目的 |
|------|--------|------|------|
| **Task<br>（任务）** | track_lin_vel_xy | +1.0 | 🎯 前进速度跟踪（**最重要**） |
| | track_ang_vel_z | +0.5 | 🎯 转向速度跟踪 |
| | alive | +0.15 | 🎯 存活奖励（不摔倒） |
| **Base<br>（机身）** | base_linear_velocity | -2.0 | 禁止上下晃动 |
| | base_angular_velocity | -0.05 | 禁止滚转/俯仰 |
| | flat_orientation_l2 | -5.0 | 禁止身体倾斜 |
| | base_height | -10 | 保持目标高度(0.78m) |
| **Joint<br>（关节）** | joint_vel | -0.001 | 关节速度平缓 |
| | joint_acc | -2.5e-7 | 关节加速度平缓 |
| | action_rate | -0.05 | 动作变化平缓 |
| | energy | -2e-5 | 降低能耗 |
| **Deviation<br>（姿态偏差）** | joint_deviation_arms | -0.1 | 手臂放松 |
| | joint_deviation_waists | -1.0 | 腰部自然摆动 |
| | joint_deviation_legs | -1.0 | 腿部自然摆动 |
| **Gait<br>（步态）** | gait | +0.5 | ✅ 规律步态（周期0.8s） |
| | feet_clearance | +1.0 | ✅ 抬脚高度(目标0.1m) |
| | feet_slide | -0.2 | 脚部抓地稳定 |
| **Safety<br>（安全）** | undesired_contacts | -1 | 禁止身体碰地 |
| | dof_pos_limits | -5.0 | 关节不超出范围 |

**说明**：✅ 鼓励项 | 禁止项

---

